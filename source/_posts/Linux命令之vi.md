---
title: Linux命令学习之vi
date: 2018-11-02 16:32:12
tags: Linux
categories: Linux
---
# Linux命令学习之vi
## 一、vi的基本操作
1. 进入vi。在系统提示符号后输入`$vi filename`，就进入了vi编辑画面。需要注意得是，一进来是命令行模式。
2. 切换到插入模式进行插入文字的操作。在命令行模式按下“i”就切换到插入模式了。需要注意的是，当你前面输错字了是不能直接删除的，这时需要切换回命令行模式删除。
3. 插入模式切换回命令行模式。在插入模式下按“esc”就可以切换回命令行模式了。
4. 退出vi并保存文件。在命令行模式下输入:
``` bash
:w filename //将文件以filename为文件名保存，并退出vi
:wq  //将文件保存并退出vi
:q!  //强制退出vi，不会保存任何修改的内容
```

## 二、命令行模式功能键
### 插入模式
按“i”切换进入插入模式，此时是从光标所在位置开始插入数据；
按“a”切换进入插入模式，是从光标所在位置的下一个位置开始插入数据；
按“o”切换进入插入模式，是插入新的一行，从行首开始插入数据。
### 从插入模式切换到命令行模式
按“esc”从插入模式切换到命令行模式。
<!-- more -->
### 移动光标
``` bash
一般都是可以直接通过上下左右键移动光标，正规的也有通过“h,j,k,l”来移动光标“左，下，上，右”。
按“Ctrl”+“b”：屏幕往“后”移动一页。
按“Ctrl”+“f”：屏幕往“前”移动一页。
按“Ctrl”+“u”：屏幕往“后”移动半页。
按“Ctrl”+“d”：屏幕往“前”移动半页。
按数字“0”：光标移动到文件开头。
按“g”：光标移动到文件末尾。
按“$”：光标移动到行尾。
按“^”：光标移动到行头。
按“w”：光标移动到下个字的字头。
按“e”：光标移动到下个字的字尾。
按“b”：光标回到上个字的字头。
按“数字”+“l”：光标移动到当前行的第几个位置。如“33l”。
```
### 删除文字
``` bash
按“x”：删除光标所在位置的后面的文字，类似“DEL”键删除文字。注意小写是删除后面的！
按“数字”+“x”：删除光标所在位置后的“数字”个文字。
按“X”：删除光标所在位置的前面的文字，类似“backspace”键删除文字。注意大写是删除前面的！
按“数字”+“X”：删除光标所在位置前的“数字”个文字。
按“dd”：删除光标所在行。
按“数字”+“dd”：从光标所在行开始删除“数字”行。
```
### 复制
``` bash
按“yw”：将光标所在之处到字尾的文字复制到缓冲区。
按“数字”+“yw”：复制N个数字到缓冲区。
按“yy”：复制光标所在行到缓冲区。
按“数字”+“yy”：从光标所在行开始往下数N行复制到缓冲区。
按“p”：将缓冲区的内容复制到光标所在位置。
//通常都是y和p配合完成复制粘贴
```
### 替换
``` bash
按“r”：替换光标所**在**之处的字符。
按“R”：替换光标所**到**之处的字符，直到按下“esc”键为止。
```
### 撤销一次命令
``` bash
按“u”：可撤销一次命令，按多次可撤销多次命令。
```
### 更改
``` bash
按“cw”：更改光标所在处的字到字尾处。
按“c数字w”：表示更改从光标所在处开始的N个字到字尾处。
```
### 跳到指定的行
``` bash
按“Ctrl”+“g”：显示出光标所在行的行号。
按“数字”+“G”：跳到文件的第N行行首。
```

## ：模式（Last line mode）下功能键
首先确定你在命令行模式下，按“:”进入last line mode该模式下。也可以理解为以下命令前都加上一个冒号，然后回车来实现相应操作，特别说明下面的只写了冒号后面的命令名。
``` bash
接“set nu”：会显示文件中所有行的行号。
接“数字”：会跳到文章的第N行。
接“/”+“关键字”：会进行查找文件中的“关键字”，类似Ctrl+F搜索文字功能。按“n”寻找下一个。
接“?”+“关键字”：一样查找关键字，但是再按“n”是向上寻找关键字。
接“w”：保存文件。
接“q”：退出vi。如果无法退出，可q后再接“!”强制退出。
接“wq”：保存文件并退出vi。 
```
